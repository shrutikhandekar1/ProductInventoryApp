(this.webpackJsonpassignment13=this.webpackJsonpassignment13||[]).push([[0],{13:function(e,t,n){e.exports=n(20)},18:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),c=n.n(o),l=(n(18),n(7)),s=n.n(l),u=n(12),i=n(8),p=n(2),d=n(3),h=n(5),m=n(4),f=n(1),b=n(6),v=n(11),y=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(h.a)(this,Object(m.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(f.a)(n)),n}return Object(b.a)(t,e),Object(d.a)(t,[{key:"handleChange",value:function(e){var t=e.target.value,n=e.target.name;this.props.onFilter(Object(v.a)({},n,t))}},{key:"render",value:function(){return r.a.createElement("form",null,r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Search...",name:"filterText",onChange:this.handleChange}))}}]),t}(a.Component),g=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).destroy=function(e){n.props.onDestroy(n.props.product.id)},n}return Object(b.a)(t,e),Object(d.a)(t,[{key:"handleClick",value:function(){this.props.updateParent(this.props.product)}},{key:"render",value:function(){var e=this;return r.a.createElement("tr",null,r.a.createElement("td",null,this.props.product.name),r.a.createElement("td",null,this.props.product.category),r.a.createElement("td",null,"$",this.props.product.price),r.a.createElement("td",null,this.props.product.instock),r.a.createElement("td",null,r.a.createElement("button",{onClick:this.handleClick.bind(this),className:"btn btn-info"},"Update")),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return e.destroy(e.props.product.id)},className:"btn btn-info"},"Delete")))}}]),t}(a.Component),E=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleDestroy=function(e){n.props.onDestroy(e)},n}return Object(b.a)(t,e),Object(d.a)(t,[{key:"updateParent",value:function(e){this.props.updateGrandparent(e)}},{key:"render",value:function(){var e=this,t=Object.keys(this.props.products).map((function(t){return e.props.products[t]})),n=[];return t.forEach((function(t){-1!==t.name.indexOf(e.props.filterText)&&n.push(r.a.createElement(g,{product:t,key:t.id,updateParent:e.updateParent.bind(e),onDestroy:e.handleDestroy}))})),r.a.createElement("div",null,r.a.createElement("table",{className:"table table-striped table-sm"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Category"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"InStock"),r.a.createElement("th",null,"\xa0Update"),r.a.createElement("th",null,"\xa0Delete"))),r.a.createElement("tbody",null,n)))}}]),t}(a.Component),k={category:"",price:"",name:"",instock:!1},j=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(h.a)(this,Object(m.a)(t).call(this,e))).handleUpdate=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n.state.product),e.prev=1,e.next=4,fetch("http://localhost:5000/products/update/"+n.state.product.id,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({product:{category:n.state.product.category,price:n.state.product.price,name:n.state.product.name,instock:n.state.product.instock}})});case 4:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])}))),n.handleSave=function(){var e=Object(i.a)(s.a.mark((function e(t){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,fetch("http://localhost:5000/products/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product:{category:n.state.product.category,price:n.state.product.price,name:n.state.product.name,instock:n.state.product.instock}})});case 4:return a=e.sent,e.next=7,a.json();case 7:r=e.sent,console.log(r),fetch("http://localhost:5000/products/get").then((function(e){return e.json()})).then((function(e){var t=[];e.map((function(e){var n=e.product,a=e._id;return n.id=a,t.push(n),null})),n.props.loadTable(),n.setState({product:k})})).catch((function(e){console.log(e)})).catch((function(e){console.log("Fetch Error :-S",e)})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),n.handleChange=n.handleChange.bind(Object(f.a)(n)),n.handleUpdate=n.handleUpdate.bind(Object(f.a)(n)),n.handleSave=n.handleSave.bind(Object(f.a)(n)),n.state={product:Object.assign({},k),updateRow:"",enableUpdateBtn:!0,errors:{}},n}return Object(b.a)(t,e),Object(d.a)(t,[{key:"handleChange",value:function(e){var t=e.target,n=t.value,a=t.name;this.setState((function(e){return e.product[a]=n,{product:e.product}}))}},{key:"componentDidUpdate",value:function(e,t){""!==this.props.updateRow&&(!0===this.state.enableUpdateBtn&&this.setState({enableUpdateBtn:!1}),this.name.value=this.props.updateRow.name,this.category.value=this.props.updateRow.category,this.price.value=this.props.updateRow.price,"true"===this.props.updateRow.instock?this.inStockTrue.value="true":this.inStockTrue.value=1)}},{key:"render",value:function(){var e=this;return r.a.createElement("form",null,r.a.createElement("h4",null,"Add a new product"),r.a.createElement("p",null,r.a.createElement("label",null,"Name ",r.a.createElement("br",null),r.a.createElement("input",{type:"text",className:"form-control",name:"name",onChange:this.handleChange,ref:function(t){e.name=t},value:this.state.product.name,required:!0}))),r.a.createElement("p",null,r.a.createElement("label",null,"Category ",r.a.createElement("br",null),r.a.createElement("input",{type:"text",className:"form-control",name:"category",onChange:this.handleChange,ref:function(t){e.category=t},value:this.state.product.category,required:!0}))),r.a.createElement("p",null,r.a.createElement("label",null,"Price ",r.a.createElement("br",null),r.a.createElement("span",{className:"form-control",id:"dollar-sign"},"$"),r.a.createElement("input",{type:"text",className:"form-control",name:"price",onChange:this.handleChange,ref:function(t){e.price=t},value:this.state.product.price,required:!0}))),r.a.createElement("p",null,"Is product in Stock? "),r.a.createElement("input",{type:"radio",name:"instock",onChange:this.handleChange,ref:function(t){e.inStockTrue=t},value:"true"}),"True",r.a.createElement("br",null),r.a.createElement("input",{type:"radio",name:"instock",onChange:this.handleChange,ref:function(t){e.inStockFalse=t},value:"false"}),"False",r.a.createElement("br",null),r.a.createElement("button",{type:"button",className:"btn btn-info",onClick:this.handleUpdate,disabled:this.state.enableUpdateBtn},"Update"),r.a.createElement("input",{type:"submit",className:"btn btn-info  ml-3",value:"Save",onClick:this.handleSave}))}}]),t}(a.Component),O=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(h.a)(this,Object(m.a)(t).call(this,e))).handleDestroy=function(){var e=Object(i.a)(s.a.mark((function e(t){var a,r,o,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:5000/products/delete/"+t,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t})});case 3:return a=e.sent,e.next=6,a.json();case 6:r=e.sent,console.log(r),o=n.state.products.findIndex((function(e){return e.id===t})),console.log(o),(c=Object(u.a)(n.state.products)).splice(o,1),n.setState({products:c}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),n.handleSave=function(){var e=Object(i.a)(s.a.mark((function e(t){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,fetch("http://localhost:5000/products/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product:{category:n.state.product.category,price:n.state.product.price,name:n.state.product.name,instock:n.state.product.instock}})});case 4:return a=e.sent,e.next=7,a.json();case 7:r=e.sent,console.log(r),fetch("http://localhost:5000/products/get").then((function(e){return e.json()})).then((function(e){var t=[];e.map((function(e){var n=e.product,a=e._id;return n.id=a,t.push(n),null})),n.props.updateTable()})).catch((function(e){console.log(e)})).catch((function(e){console.log("Fetch Error :-S",e)})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),n.state={filterText:"",products:"",productToBeUpdated:""},n.handleFilter=n.handleFilter.bind(Object(f.a)(n)),n.handleDestroy=n.handleDestroy.bind(Object(f.a)(n)),n.loadData=n.loadData.bind(Object(f.a)(n)),n}return Object(b.a)(t,e),Object(d.a)(t,[{key:"updateGrandparent",value:function(e){this.setState({productToBeUpdated:e})}},{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;fetch("http://localhost:5000/products/get").then((function(e){return e.json()})).then((function(t){var n=[];t.map((function(t){var a=t.product,r=t._id;return a.id=r,n.push(a),e.setState({products:n}),null}))})).catch((function(e){console.log(e)})).catch((function(e){console.log("Fetch Error :-S",e)}))}},{key:"handleFilter",value:function(e){this.setState(e)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Product Inventory"),r.a.createElement(y,{onFilter:this.handleFilter}),r.a.createElement(E,{products:this.state.products,filterText:this.state.filterText,onDestroy:this.handleDestroy,updateGrandparent:this.updateGrandparent.bind(this)}),r.a.createElement(j,{loadTable:this.loadData,updateRow:this.state.productToBeUpdated}))}}]),t}(a.Component);var C=function(){return r.a.createElement("div",null,r.a.createElement(O,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[13,1,2]]]);
//# sourceMappingURL=main.e37d0dcb.chunk.js.map